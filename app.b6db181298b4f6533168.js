webpackJsonp([1],{0:function(t,e){},G9ve:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),r=n("8+8L"),a=n("Gu7T"),i=n.n(a),o=n("Xxa5"),c=n.n(o),l=n("exGp"),u=n.n(l),d={name:"FavoritesList",data:function(){return{url:"https://dailyradio-server.herokuapp.com/",accessToken:"asdas",refreshToken:"asdasd",tracks:[]}},computed:{},methods:{auth:function(){var t,e=this;this.$http.post(this.url+"auth/login",{login:"asd",password:"qwe"}).then(function(t){e.accessToken=t.body.accessToken,e.refreshToken=t.body.freshToken,e.getTracks()}).catch((t=u()(c.a.mark(function t(n){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Auth error.."),403!=n.status){t.next=4;break}return t.next=4,e.refreshTokens({func:e.getTracks});case 4:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}))},hideTrack:function(t,e){t.target.parentElement.style.visibility="hidden",this.delTrack(e,t.target.parentElement)},getTracks:function(){var t,e=this;this.$http.post(this.url+"favorites/",{},{headers:{Authorization:"Bearer "+this.accessToken}}).then(function(t){e.tracks=t.body}).catch((t=u()(c.a.mark(function t(n){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("REFRESHING.."),403!=n.status){t.next=4;break}return t.next=4,e.refreshTokens({func:e.getTracks});case 4:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}))},PrettyTimeFormat:function(t){return t<10?"0"+t:t},_imageEncode:function(t){if(!t)return"https://i.imgur.com/1Y5Uhk6.png";new Uint8Array(t);return"data:image/jpeg;base64,"+btoa([].reduce.call(new Uint8Array(t),function(t,e){return t+String.fromCharCode(e)},""))},delTrack:function(t,e){var n,s=this;this.$http.post(this.url+"favorites/delete",{song:t},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}}).then(function(t){s.tracks=t.body,e.style.visibility="visible"}).catch((n=u()(c.a.mark(function n(r){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("REFRESHING.."),403!=r.status){n.next=4;break}return n.next=4,s.refreshTokens({func:s.delTrack,args:[t,e]});case 4:case"end":return n.stop()}},n,s)})),function(t){return n.apply(this,arguments)}))},refreshTokens:function(t){var e=this;this.$http.post(this.url+"auth/refresh",{refreshToken:this.refreshToken},{headers:{"Content-Type":"application/json"}}).then(function(n){n.body.refreshToken&&(e.refreshToken=n.body.refreshToken,e.accessToken=n.body.accessToken,t.args?t.func.apply(t,i()(t.args)):t.func())})}},created:function(){this.auth()}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{on:{click:function(e){return t.getTracks()}}},[t._v("REFRESH")]),t._v(" "),n("div",{staticClass:"wrapper container-fluid"},[n("div",{staticClass:"content d-flex"},[t.tracks[0]?t._e():n("div",{staticClass:"no-songs container"},[t._v("No favorite songs")]),t._v(" "),t.tracks[0]?n("div",{staticClass:"song-list container"},t._l(t.tracks,function(e,s){return n("div",{key:s,staticClass:"song d-flex row"},[n("div",{staticClass:"song-index d-none d-md-flex col-md-1 align-items-center justify-content-end"},[t._v(t._s(s+1)+".â€‚")]),t._v(" "),n("div",{staticClass:"song-cover d-flex align-items-center justify-content-center"},[n("img",{staticClass:"b-radius",attrs:{src:t._imageEncode(e.picture.data),alt:"IMG",height:"60px",width:"60px"}})]),t._v(" "),n("div",{staticClass:"song-info col col-md row"},[n("div",{staticClass:"info-title col-12 col-md-6 col-xl-4 d-flex align-items-center"},[n("span",{staticClass:"text-truncate"},[n("b",[t._v(t._s(e.title))])])]),t._v(" "),n("div",{staticClass:"info-artist col-12 col-md-6 col-xl-4 d-flex align-items-center"},[n("span",{staticClass:"text-truncate"},[t._v(t._s(e.artist))])]),t._v(" "),n("div",{staticClass:"info-albom d-none col-xl-4 d-xl-flex align-items-center"},[t._v(t._s(e.album))])]),t._v(" "),n("div",{staticClass:"song-duration col-1 d-flex align-items-center justify-content-center"},[t._v(t._s(parseInt(e.duration/60)+":"+t.PrettyTimeFormat(parseInt(e.duration%60))))]),t._v(" "),n("div",{staticClass:"song-controls col-1 d-flex align-items-center justify-content-center"},[t._v("X")])])}),0):t._e()])])])},staticRenderFns:[]};var h={name:"App",components:{FavoritesList:n("VU/8")(d,f,!1,function(t){n("G9ve")},null,null).exports}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("FavoritesList")],1)},staticRenderFns:[]};var v=n("VU/8")(h,p,!1,function(t){n("nKdq")},null,null).exports;n("K3J8");s.a.use(r.a),s.a.config.productionTip=!0,new s.a({el:"#app",components:{App:v},template:"<App/>"})},nKdq:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b6db181298b4f6533168.js.map